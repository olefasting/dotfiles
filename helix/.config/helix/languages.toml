
[language-server.ziggy-lsp]
command = "ziggy"
args = ["lsp"]

[[language]]
name = "ziggy"
scope = "text.ziggy"
roots = []
injection-regex = "ziggy|zgy"
file-types = ["ziggy", "zgy"]
comment-token = "//"
auto-format = true
formatter = { command = "ziggy", args = ["fmt", "--stdin"] }
language-servers = ["ziggy-lsp"]

[[grammar]]
name = "ziggy"
source = { git = "https://github.com/kristoff-it/ziggy", rev = "0e46579ed878bb28a78cf624c2e593eb39301648", subpath = "tree-sitter-ziggy" }

[[language]]
name = "ziggy_schema"
scope = "text.ziggy_schema"
roots = []
injection-regex = "ziggy-schema|zgy-schema"
file-types = ["ziggy-schema", "zgy-schema"]
comment-token = "///"
indent = { tab-width = 4, unit = "    " }
formatter = { command = "ziggy", args = ["fmt", "-", "--type", "schema"] }
auto-format = true
language-servers = ["ziggy-schema-lsp"]

[[grammar]]
name = "ziggy_schema"
source = { git = "https://github.com/kristoff-it/ziggy", rev = "0e46579ed878bb28a78cf624c2e593eb39301648", subpath = "tree-sitter-ziggy-schema" }

[language-server.ziggy-schema-lsp]
command = "ziggy"
args = ["lsp", "--schema"]

[language-server.biome]
command = "biome"
args = ["lsp-proxy"]

[language-server.deno-lsp]
command = "deno"
args = ["lsp"]
config = { enable = true, lint = true, unstable = true }

[[language]]
name = "javascript"
scope = "source.js"
injection-regex = "^(js|javascript)$"
file-types = ["js", "jsx", "mjs"]
shebangs = ["deno", "node"]
roots = ["deno.json", "package.json", "tsconfig.json"]
comment-token = "//"
language-servers = ["deno-lsp"]
language-id = "javascript"
indent = { tab-width = 2, unit = "  " }
auto-format = true

[[language]]
name = "jsx"
scope = "source.jsx"
injection-regex = "jsx"
file-types = ["jsx"]
shebangs = ["deno", "node"]
roots = ["deno.json", "package.json", "tsconfig.json"]
comment-token = "//"
language-servers = ["deno-lsp"]
language-id = "javascriptreact"
indent = { tab-width = 2, unit = "  " }
grammar = "javascript"
auto-format = true

[[language]]
name = "typescript"
scope = "source.ts"
injection-regex = "^(ts|typescript)$"
file-types = ["ts"]
shebangs = ["deno", "node"]
roots = ["deno.json", "package.json", "tsconfig.json"]
language-servers = ["deno-lsp"]
language-id = "typescript"
indent = { tab-width = 2, unit = "  " }
auto-format = true

[[language]]
name = "tsx"
scope = "source.tsx"
injection-regex = "^(tsx)$"                            # |typescript
file-types = ["tsx"]
shebangs = ["deno", "node"]
roots = ["deno.json", "package.json", "tsconfig.json"]
language-servers = ["deno-lsp"]
language-id = "typescriptreact"
indent = { tab-width = 2, unit = "  " }
auto-format = true

[[language]]
name = "json"
language-servers = [
  { name = "vscode-json-language-server", except-features = [
    "format",
  ] },
  "biome",
]

[[language]]
name = "toml"
formatter = { command = "taplo", args = ["format", "-"] }
auto-format = true

[[language]]
name = "python"
# use pylsp-mypy for mypy
language-servers = ["pylsp", "ruff"]
formatter = { command = "ruff", args = ["format", "-n", "-"] }
auto-format = true

[language-server.ruff]
command = "ruff"
args = ["server", "--preview"]
config = { settings = { organizeImports = true, lint.run = "onSave" } }

[[language]]
name = "fish"
formatter = { command = "fish_indent" }
language-servers = ["fish-lsp"]
auto-format = true

[language-server.efm]
command = "efm-langserver"

[[language]]
name = "php"
language-servers = [
  { name = "phpactor", except-features = [
    "format",
  ] },
  { name = "phan", except-features = [
    "format",
  ] },
  { name = "psalm", except-features = [
    "format",
  ] },
  { name = "efm", only-features = [
    "code-action",
    "diagnostics",
  ] }, # for phpstan
]
formatter = { command = "pretty-php", args = [
  "--psr12",
  "--preset",
  "laravel",
  "-",
] }
auto-format = true

[language-server.phpactor]
command = "phpactor"
args = ["language-server"]

[language-server.psalm]
command = "psalm"
args = ["--language-server"]

[[language]]
name = "lua"
language-servers = [
  { name = "lua-language-server", except-features = [
    "format",
  ] },
  { name = "efm", only-features = [
    "diagnostics",
    "code-action",
  ] }, # for seleney
]
formatter = { command = "stylua", args = ["-"] }
auto-format = true

[language-server.lua-language-server.config.Lua]
format.enable = false
runtime.version = "LuaJIT"
diagnostics.globals = ["vim"]
workspace.library = [
  "/usr/share/nvim/runtime/lua",
  "/usr/share/nvim/runtime/lua/vim",
  "/usr/share/nvim/runtime/lua/vim/lsp",
]

[language-server.zls]
command = "/home/oasf/.local/share/asdf/shims/zls"

[language-server.zls.config]
zig_exe_path = "/home/oasf/.local/share/asdf/shims/zig"
global_cache_dir = "/home/oasf/.cache/zls"
global_config_dir = "/etc/xdg"
local_config_dir = "/home/oasf/.config"
config_file = "/home/oasf/.config/zls.json"
enable_build_on_save = true

[[language]]
name = "zig"
language-servers = ["zls"]
auto-format = true

[[language]]
name = "gas"
file-types = ["s", "S"]
language-servers = ["asm-lsp"]

[language-server.asm-lsp]
command = "asm-lsp"
args = []
config = { filetypes = ["s", "S"] }

[[language]]
name = "rust"
formatter = { command = "rustfmt", args = ["+nightly"] }
auto-format = true

[language.auto-pairs]
'(' = ')'
'{' = '}'
'[' = ']'
'"' = '"'
'`' = '`'

[language-server.rust-analyzer]
config = { cargo = { features = "all" } }

[[language]]
name = "dockerfile"
language-servers = [
  "docker-langserver",
  { name = "efm", only-features = [
    "code-action",
    "diagnostics",
  ] }, # for hadolint
]

[[language]]
name = "yaml"
file-types = ["yml", "yaml", { glob = "phpstan.neon" }]
language-servers = ["vscode-yaml-language-server"]
formatter = { command = "prettier", args = ["--"] }

[[language]]
name = "git-config"
file-types = [
  { glob = "git/config" },
  { glob = ".gitmodules" },
  { glob = ".gitconfig" },
  { glob = ".git/config" },
  { glob = ".config/git/config" },
]
language-servers = [
  "pkgbuild-language-server",
  { except-features = [
    # "diagnostics",
  ], name = "bash-language-server" },
]

[language-server.clangd]
command = "clangd"
args = ["--clang-tidy", "-j=5", "--malloc-trim"]

[[language]]
name = "c"
file-types = ["c", "h"]
language-servers = [
  "clangd",
  { name = "efm", only-features = ["diagnostics"] }, # gcc lints and cppcheck
]
formatter = { command = 'clang-format' }
auto-format = true

[[language]]
name = "cpp"
file-types = ["cpp", "cc", "cxx", "hpp", "hcc", "hxx"]
language-servers = [
  "clangd",
  { name = "efm", only-features = ["diagnostics"] }, # gcc lints and cppcheck
]
formatter = { command = 'clang-format' }
auto-format = true

[[language]]
name = "bash"
language-servers = ["bash-language-server"]
formatter = { command = "shfmt", args = ["--indent", "2", "-"] }
auto-format = true

[[language]]
name = "pkgbuild"
formatter = { command = "shfmt", args = ["--indent", "2", "-"] }
auto-format = true
language-servers = [
  # "pkgbuild-language-server"
  "termux-language-server",
  { except-features = [
    # "diagnostics",
  ], name = "bash-language-server" },
]

[language-server.termux-language-server]
command = "termux-language-server"

[[language]]
name = "mojo"
scope = "source.mojo"
file-types = ["mojo", "ðŸ”¥", { glob = "__init__.mojo" }]
shebangs = ["mojo"]
injection-regex = "mojo"
roots = []
formatter = { command = "mojo", args = ["format", "-"] }
auto-format = true
comment-token = "#"
language-servers = ["mojo-lsp-server"]
indent = { tab-width = 4, unit = "    " }
grammar = "python"

[language-server.mojo-lsp-server]
command = "mojo-lsp-server"

[language-server.gpt]
command = "helix-gpt"
args = [
  "--handler",
  "ollama",
  "--logFile",
  "~/.var/log/helix-gpt.log",
  "--fetchTimeout",
  "10000",
  "--actionTimeout",
  "10000",
  "--completionTimeout",
  "10000",
  "--ollamaTimeout",
  "60000",
  "--ollamaEndpoint",
  "http://127.0.0.1:11434",
  "--ollamaModel",
  "deepseek-r1:14b",
  # "wizardlm2",
  # "codestral",
  # "qwen2.5-coder:14b",
  # "codellama:13b",
  # "--ollamaContext",
  # "ollama context here",
]

[language-server.vscode-css-language-server.config]
# https://code.visualstudio.com/docs/languages/css#_customizing-css-scss-and-less-settings
css.lint.unknownAtRules = "ignore"

[language-server.tailwindcss-lsp]
command = "tailwindcss-language-server"
args = ["--stdio"]
config.includeLanguages.tailwindcss = "css"

[[language]]
name = "html"
language-servers = [
  "vscode-html-language-server",
  "superhtml",
  "tailwindcss-lsp",
]
